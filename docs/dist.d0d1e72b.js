var e=globalThis.parcelRequire94c2,t=e.register;t("2YoJF",function(t,r){var o=e("6ZWSX").Buffer,n=t.exports&&t.exports.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,n)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),s=t.exports&&t.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=t.exports&&t.exports.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return s(t,e),t},c=t.exports&&t.exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.HttpsProxyAgent=void 0;let p=i(e("kjyEk")),u=i(e("kjyEk")),a=c(e("aLUwE")),l=c(e("1SXIy"));var f=e("6BIfz"),d=e("biuEp"),h=e("7SCeH");let x=(0,l.default)("https-proxy-agent"),y=e=>void 0===e.servername&&e.host&&!p.isIP(e.host)?{...e,servername:e.host}:e;class g extends f.Agent{constructor(e,t){super(t),this.options={path:void 0},this.proxy="string"==typeof e?new d.URL(e):e,this.proxyHeaders=t?.headers??{},x("Creating new HttpsProxyAgent instance: %o",this.proxy.href);let r=(this.proxy.hostname||this.proxy.host).replace(/^\[|\]$/g,""),o=this.proxy.port?parseInt(this.proxy.port,10):"https:"===this.proxy.protocol?443:80;this.connectOpts={ALPNProtocols:["http/1.1"],...t?b(t,"headers"):null,host:r,port:o}}async connect(e,t){let r;let{proxy:n}=this;if(!t.host)throw TypeError('No "host" provided');"https:"===n.protocol?(x("Creating `tls.Socket`: %o",this.connectOpts),r=u.connect(y(this.connectOpts))):(x("Creating `net.Socket`: %o",this.connectOpts),r=p.connect(this.connectOpts));let s="function"==typeof this.proxyHeaders?this.proxyHeaders():{...this.proxyHeaders},i=p.isIPv6(t.host)?`[${t.host}]`:t.host,c=`CONNECT ${i}:${t.port} HTTP/1.1\r
`;if(n.username||n.password){let e=`${decodeURIComponent(n.username)}:${decodeURIComponent(n.password)}`;s["Proxy-Authorization"]=`Basic ${o.from(e).toString("base64")}`}for(let e of(s.Host=`${i}:${t.port}`,s["Proxy-Connection"]||(s["Proxy-Connection"]=this.keepAlive?"Keep-Alive":"close"),Object.keys(s)))c+=`${e}: ${s[e]}\r
`;let l=(0,h.parseProxyResponse)(r);r.write(`${c}\r
`);let{connect:f,buffered:d}=await l;if(e.emit("proxyConnect",f),this.emit("proxyConnect",f,e),200===f.statusCode)return(e.once("socket",v),t.secureEndpoint)?(x("Upgrading socket connection to TLS"),u.connect({...b(y(t),"host","path","port"),socket:r})):r;r.destroy();let g=new p.Socket({writable:!1});return g.readable=!0,e.once("socket",e=>{x("Replaying proxy buffer for failed request"),(0,a.default)(e.listenerCount("data")>0),e.push(d),e.push(null)}),g}}function v(e){e.resume()}function b(e,...t){let r;let o={};for(r in e)t.includes(r)||(o[r]=e[r]);return o}g.protocols=["http","https"],t.exports.HttpsProxyAgent=g}),t("6BIfz",function(t,r){var o=t.exports&&t.exports.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,n)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=t.exports&&t.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=t.exports&&t.exports.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&o(t,e,r);return n(t,e),t},i=t.exports&&t.exports.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.Agent=void 0;let c=s(e("kjyEk")),p=s(e("k6Qs9"));var u=e("cgLmW");i(e("iv1c4"),t.exports);let a=Symbol("AgentBaseInternalState");class l extends p.Agent{constructor(e){super(e),this[a]={}}isSecureEndpoint(e){if(e){if("boolean"==typeof e.secureEndpoint)return e.secureEndpoint;if("string"==typeof e.protocol)return"https:"===e.protocol}let{stack:t}=Error();return"string"==typeof t&&t.split("\n").some(e=>-1!==e.indexOf("(https.js:")||-1!==e.indexOf("node:https:"))}incrementSockets(e){if(this.maxSockets===1/0&&this.maxTotalSockets===1/0)return null;this.sockets[e]||(this.sockets[e]=[]);let t=new c.Socket({writable:!1});return this.sockets[e].push(t),this.totalSocketCount++,t}decrementSockets(e,t){if(!this.sockets[e]||null===t)return;let r=this.sockets[e],o=r.indexOf(t);-1!==o&&(r.splice(o,1),this.totalSocketCount--,0===r.length&&delete this.sockets[e])}getName(e){return("boolean"==typeof e.secureEndpoint?e.secureEndpoint:this.isSecureEndpoint(e))?u.Agent.prototype.getName.call(this,e):super.getName(e)}createSocket(e,t,r){let o={...t,secureEndpoint:this.isSecureEndpoint(t)},n=this.getName(o),s=this.incrementSockets(n);Promise.resolve().then(()=>this.connect(e,o)).then(i=>{if(this.decrementSockets(n,s),i instanceof p.Agent)try{return i.addRequest(e,o)}catch(e){return r(e)}this[a].currentSocket=i,super.createSocket(e,t,r)},e=>{this.decrementSockets(n,s),r(e)})}createConnection(){let e=this[a].currentSocket;if(this[a].currentSocket=void 0,!e)throw Error("No socket was returned in the `connect()` function");return e}get defaultPort(){return this[a].defaultPort??("https:"===this.protocol?443:80)}set defaultPort(e){this[a]&&(this[a].defaultPort=e)}get protocol(){return this[a].protocol??(this.isSecureEndpoint()?"https:":"http:")}set protocol(e){this[a]&&(this[a].protocol=e)}}t.exports.Agent=l}),t("iv1c4",function(t,r){var o=e("6ZWSX").Buffer,n=t.exports&&t.exports.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,n)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),s=t.exports&&t.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=t.exports&&t.exports.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return s(t,e),t};Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.req=t.exports.json=t.exports.toBuffer=void 0;let c=i(e("k6Qs9")),p=i(e("cgLmW"));async function u(e){let t=0,r=[];for await(let o of e)t+=o.length,r.push(o);return o.concat(r,t)}async function a(e){let t=(await u(e)).toString("utf8");try{return JSON.parse(t)}catch(e){throw e.message+=` (input: ${t})`,e}}t.exports.toBuffer=u,t.exports.json=a,t.exports.req=function(e,t={}){let r=(("string"==typeof e?e:e.href).startsWith("https:")?p:c).request(e,t),o=new Promise((e,t)=>{r.once("response",e).once("error",t).end()});return r.then=o.then.bind(o),r}}),t("7SCeH",function(t,r){var o=e("6ZWSX").Buffer,n=t.exports&&t.exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.parseProxyResponse=void 0;let s=(0,n(e("1SXIy")).default)("https-proxy-agent:parse-proxy-response");t.exports.parseProxyResponse=function(e){return new Promise((t,r)=>{let n=0,i=[];function c(){let u=e.read();u?function(u){i.push(u),n+=u.length;let a=o.concat(i,n),l=a.indexOf("\r\n\r\n");if(-1===l){s("have not received end of HTTP headers yet..."),c();return}let f=a.slice(0,l).toString("ascii").split("\r\n"),d=f.shift();if(!d)return e.destroy(),r(Error("No header received from proxy CONNECT response"));let h=d.split(" "),x=+h[1],y=h.slice(2).join(" "),g={};for(let t of f){if(!t)continue;let o=t.indexOf(":");if(-1===o)return e.destroy(),r(Error(`Invalid header from proxy CONNECT response: "${t}"`));let n=t.slice(0,o).toLowerCase(),s=t.slice(o+1).trimStart(),i=g[n];"string"==typeof i?g[n]=[i,s]:Array.isArray(i)?i.push(s):g[n]=s}s("got proxy server response: %o %o",d,g),p(),t({connect:{statusCode:x,statusText:y,headers:g},buffered:a})}(u):e.once("readable",c)}function p(){e.removeListener("end",u),e.removeListener("error",a),e.removeListener("readable",c)}function u(){p(),s("onend"),r(Error("Proxy connection ended before receiving CONNECT response"))}function a(e){p(),s("onerror %o",e),r(e)}e.on("error",a),e.on("end",u),c()})}});
//# sourceMappingURL=dist.d0d1e72b.js.map
